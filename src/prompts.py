"""LLM 프롬프트 템플릿 모음 — 모드별 분기 포함."""

# ── 시스템 프롬프트 (모드별) ──

SYSTEM_PROMPTS = {
    "quick": (
        "당신은 리뷰 논문 작성을 돕는 실용적인 연구 보조원입니다. "
        "사용자가 최소한의 입력으로 빠르게 논문 초안을 만들 수 있도록 돕습니다. "
        "핵심만 간결하게 답하고, 부족한 정보는 합리적으로 추론해서 채워 주세요. "
        "한국어로 응답하되, 학술 용어는 영어를 병기할 수 있습니다."
    ),
    "standard": (
        "당신은 학술 리뷰 논문 작성을 돕는 전문 연구 보조원입니다. "
        "사용자의 연구 주제에 대해 체계적이고 학술적인 리뷰 논문 작성을 단계별로 지원합니다. "
        "한국어로 응답하되, 학술 용어는 영어를 병기할 수 있습니다. "
        "응답은 구체적이고 실용적이어야 합니다."
    ),
    "expert": (
        "당신은 학술 리뷰 논문 작성을 돕는 시니어 연구 컨설턴트입니다. "
        "Microsoft Research, Google DeepMind 수준의 고품질 학술 문서를 작성할 수 있도록 "
        "체계적이고 심층적인 가이드를 제공합니다. "
        "각 섹션에 대해 학술적 엄밀성(rigor)을 유지하며, 비판적 분석과 "
        "체계적 방법론을 강조합니다. "
        "한국어로 응답하되, 학술 용어는 영어를 병기합니다."
    ),
}

# ── 개요 프롬프트 ──

OVERVIEW_PROMPTS = {
    "quick": """\
다음 리뷰 논문 주제에 대해 간결한 개요를 작성해 주세요.

**주제**: {topic}
**키워드**: {keywords}

다음을 1-2문장씩 간결하게:
1. 연구 배경
2. 핵심 연구 동향
3. 리뷰 목적
""",
    "standard": """\
다음 리뷰 논문 주제에 대해 하이레벨 개요를 작성해 주세요.

**주제**: {topic}
**연구 질문**: {research_question}
**범위**: {scope}
**키워드**: {keywords}
**논문 유형**: {paper_type}

다음 항목을 포함해서 개요를 작성해 주세요:
1. 연구 배경 및 필요성
2. 주요 연구 동향 요약
3. 리뷰의 목적과 기여점
4. 예상 대상 독자
5. 핵심 논의 방향
""",
    "expert": """\
다음 리뷰 논문 주제에 대해 상세한 개요를 작성해 주세요.

**주제**: {topic}
**연구 질문**: {research_question}
**범위**: {scope}
**키워드**: {keywords}
**논문 유형**: {paper_type}
**연구 동기**: {motivation}
**제외 기준**: {exclusion_criteria}
**검색 기간**: {time_range}
**검색 데이터베이스**: {databases}

다음 항목을 심층적으로 기술해 주세요:
1. 연구 배경 — 해당 분야의 역사적 맥락과 현재 상태
2. 연구 간극(Research Gap) — 기존 리뷰에서 다루지 못한 영역
3. 이론적 프레임워크 — 분석에 사용할 이론적 틀
4. 주요 연구 동향 — 시기별/관점별 분류
5. 리뷰의 독창적 기여 — 기존 리뷰와의 차별점
6. 방법론적 접근 — 체계적 검색 전략과 선정 기준
7. 예상 대상 독자 및 활용 방안
8. 핵심 논의 방향과 기대되는 시사점
""",
}

# ── 구조 프롬프트 ──

STRUCTURE_PROMPTS = {
    "quick": """\
다음 리뷰 논문의 기본 구조(목차)를 간단히 제안해 주세요.

**주제**: {topic}
**개요**: {overview}

5-6개 핵심 섹션만 제안해 주세요. 각 섹션은 제목과 한 줄 설명만.
""",
    "standard": """\
다음 리뷰 논문의 상세 구조(목차)를 설계해 주세요.

**주제**: {topic}
**연구 질문**: {research_question}
**개요**: {overview}

각 섹션에 대해 다음 형식으로 제안해 주세요:
- 섹션 제목
- 간략한 설명 (2-3문장)
- 하위 섹션 (있을 경우)

일반적인 리뷰 논문 구조(서론, 배경, 주제별 리뷰, 논의, 결론)를 기반으로 하되,
주제 특성에 맞게 조정해 주세요.
""",
    "expert": """\
다음 리뷰 논문의 상세 구조를 설계해 주세요. 최상위 저널(Nature Reviews, ACM Computing Surveys 등) 수준을 목표합니다.

**주제**: {topic}
**연구 질문**: {research_question}
**개요**: {overview}
**이론적 프레임워크**: {theoretical_framework}
**연구 간극 분석**: {gap_analysis}
**방법론 노트**: {methodology_notes}

각 섹션에 대해 다음을 포함해 주세요:
1. 섹션 제목 및 학술적 위치 설명
2. 상세 설명 (목적, 다룰 핵심 논점, 예상 분량)
3. 하위 섹션 및 각각의 초점
4. 섹션 간 논리적 연결고리
5. 해당 섹션에서 답해야 할 핵심 질문

구조 설계 시 고려사항:
- 체계적 리뷰 방법론(PRISMA 등) 반영 여부
- 분류 체계(taxonomy)의 명확성
- 비판적 분석 섹션의 깊이
- 향후 연구 방향의 구체성
""",
}

# ── 초안 작성 프롬프트 ──

DRAFT_SECTION_PROMPTS = {
    "quick": """\
다음 리뷰 논문 섹션의 초안을 간결하게 작성해 주세요.

**논문 주제**: {topic}
**작성할 섹션**: {section_title}
**섹션 설명**: {section_description}
{subsections_text}

핵심 내용 위주로 작성하되, 학술적 톤을 유지해 주세요.
참고문헌은 [Author, Year] 형식으로 표시해 주세요.
""",
    "standard": """\
다음 리뷰 논문 섹션의 초안을 작성해 주세요.

**논문 주제**: {topic}
**논문 개요**: {overview}
**전체 구조**: {structure_summary}

---

**작성할 섹션**: {section_title}
**섹션 설명**: {section_description}
{subsections_text}

학술적 문체로 작성하되, 구체적인 논의와 분석을 포함해 주세요.
참고문헌이 필요한 부분은 [Author, Year] 형식으로 표시해 주세요.
""",
    "expert": """\
다음 리뷰 논문 섹션의 고품질 초안을 작성해 주세요. 최상위 학술지 수준을 목표합니다.

**논문 주제**: {topic}
**논문 개요**: {overview}
**전체 구조**: {structure_summary}

---

**작성할 섹션**: {section_title}
**섹션 설명**: {section_description}
{subsections_text}

작성 시 다음을 반드시 포함해 주세요:
1. 도입부 — 이 섹션의 목적과 전체 논문에서의 위치
2. 체계적 분류 — 관련 연구를 명확한 기준으로 분류
3. 비판적 분석 — 각 접근법의 강점, 한계, 비교
4. 핵심 통찰 — 기존 연구에서 도출되는 패턴이나 트렌드
5. 소결 — 이 섹션의 요약과 다음 섹션으로의 연결

문체 요구사항:
- 수동태보다 능동태 사용
- 주장에는 반드시 근거 제시
- 참고문헌은 [Author, Year] 형식
- 표나 비교 프레임워크 제안 가능
""",
}

# ── 최종 통합 프롬프트 ──

FINALIZE_PROMPTS = {
    "quick": """\
다음 리뷰 논문의 섹션별 초안을 하나의 논문으로 통합해 주세요.

**주제**: {topic}

{all_sections}

간결한 Abstract를 추가하고, 섹션 간 흐름이 자연스럽도록 정리해 주세요.
""",
    "standard": """\
다음은 리뷰 논문의 전체 섹션별 초안입니다. 이를 하나의 완성된 논문으로 통합해 주세요.

**주제**: {topic}
**연구 질문**: {research_question}

{all_sections}

다음 사항을 고려해 최종 논문을 완성해 주세요:
1. 섹션 간 자연스러운 연결과 흐름
2. 일관된 학술적 문체
3. 서론과 결론의 논리적 연결
4. 반복되는 내용 제거
5. Abstract 추가
""",
    "expert": """\
다음은 리뷰 논문의 전체 섹션별 초안입니다. 최상위 저널 수준의 완성된 논문으로 통합해 주세요.

**주제**: {topic}
**연구 질문**: {research_question}

{all_sections}

다음 품질 기준을 반드시 충족해 주세요:
1. **Abstract** — 구조화된 초록 (배경, 목적, 방법, 결과, 결론)
2. **논리적 흐름** — 각 섹션이 명확한 논리적 순서로 연결
3. **일관성** — 용어, 약어, 문체의 통일
4. **비판적 깊이** — 단순 나열이 아닌 분석적 통합
5. **서론-결론 대칭** — 제기한 질문에 대한 답변 확인
6. **기여점 명시** — 학술적 기여가 명확히 드러남
7. **향후 연구** — 구체적이고 실행 가능한 연구 방향
8. **반복 제거** — 중복 내용 통합
9. **전환 문장** — 섹션 간 브릿지 문장 확인
""",
}

# ── 개선 프롬프트 ──

REFINE_PROMPT = """\
다음 리뷰 논문 섹션을 사용자의 피드백을 반영하여 개선해 주세요.

**현재 내용**:
{current_content}

**사용자 피드백**:
{feedback}

피드백을 반영하여 개선된 버전을 작성해 주세요.
"""

# ── 대화형 도우미 프롬프트 ──

CHAT_PROMPT = """\
리뷰 논문 작성 맥락에서 사용자의 질문에 답해 주세요.

**현재 논문 주제**: {topic}
**현재 단계**: {stage}
**관련 정보**: {context}

**사용자 질문**: {question}
"""

# ── Quick 모드 전용: AI 자동완성 프롬프트 ──

QUICK_AUTOFILL_TOPIC = """\
다음 주제에 대한 리뷰 논문을 빠르게 기획해 주세요.

**주제**: {topic}

다음을 JSON 형식으로 반환해 주세요:
{{
  "research_question": "연구 질문",
  "scope": "리뷰 범위",
  "keywords": "키워드1, 키워드2, 키워드3"
}}
"""

# ── Expert 모드 전용: 워크숍 질문 프롬프트 ──

EXPERT_WORKSHOP_TOPIC = """\
다음 주제에 대해 리뷰 논문을 기획하고 있습니다. 사용자가 더 깊이 생각할 수 있도록
워크숍 스타일의 가이드 질문을 제시해 주세요.

**주제**: {topic}
**현재 입력된 정보**:
- 연구 질문: {research_question}
- 범위: {scope}
- 키워드: {keywords}

다음 관점에서 사용자가 고려해야 할 질문들을 제시해 주세요:
1. 연구 질문의 구체성과 범위 적절성
2. 검색 전략 및 데이터베이스 선정
3. 포함/제외 기준의 명확성
4. 기존 리뷰 논문과의 차별화 전략
5. 잠재적 bias나 한계점
"""
